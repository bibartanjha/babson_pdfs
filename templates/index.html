<!DOCTYPE html>

<html>
    <head>      
        <script src="{{ url_for('static', filename='script.js') }}"></script>
        <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <link href="https://fonts.googleapis.com/css2?family=Itim&family=Oswald&family=Sofia&family=Ubuntu:wght@300;500&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Coding Exercise 01</title>
    </head>
    
    <body>
	<div class="jumbotron text-white" style="text-align: center; border-radius: 0px; margin-bottom:0px; background-color:#008bed">
    <h1>OLCF Support Software Team - Coding Exercise 01</h1>
    <h4>Bibartan Jha</h4>
	</div>
	<br><br>
    <div class="container">
		<fieldset>
	    <form action="/batch_jobs" method="GET">
    		<legend>Filters</legend>
    		<h6>(To not use a filter, leave that textbox blank)</h6><br>
    		<p>
    		<label for="after">Submitted After: </label>
    		<input type="text" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}[+|-][0-9]{2}:[0-9]{2}" id="after" name="after" placeholder="ISO 8601 datetime"><br>
    		</p>
    		<p>
    		<label for="before">Submitted Before: </label>
    		<input type="text" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}[+|-][0-9]{2}:[0-9]{2}"id="before" name="before" placeholder="ISO 8601 datetime"><br>
    		</p>
    		<p>
    		<label for="min_nodes">Minimum nodes: </label>
    		<input type="number" id="min_nodes" name="min_nodes" placeholder=integer><br>
    		</p>
    		<p>
    		<label for="max_nodes">Maximum nodes: </label>
    		<input type="number" id="max_nodes" name="max_nodes" placeholder=integer><br>
    		</p>
    		<br > 		
    		<input type="submit" name="submit" value="Apply filters" class="btn btn-secondary ml-3">
		</form>
		<form action="/batch_jobs" method="POST">
    		<input type="submit" name="submit" value="Show all jobs" class="btn btn-secondary ml-3">
		</form> 
		</fieldset> 
	<br><br><br>
	<table>
	    <tr>
	    <td style="font-weight:bold">Batch Number</td>
	    <td style="font-weight:bold">Submitted at</td>
	    <td style="font-weight:bold">Nodes used</td>
	    </tr>
	  	{% for job in data %}
		    <tr>
		        <td>{{job['batch_number']}}</td>
		        <td>{{job['submitted_at']}}</td>
		        <td>{{job['nodes_used']}}</td>
		    </tr>
	    {% endfor %}
    </table>        
	</div>
	    <style>
		    body {
		        background-color: white;
		        text-align: center;
		    }
		    fieldset {
			    border: 1px solid #CCA383;
			    margin:auto;
			    width: 400px;
			    background: #FFE8EF;
			    padding: 3px;
			}

	    </style>
    </body>
</html>

